# Rive ViewModel Generator

A Flutter application that generates Dart view model classes from Rive files. This tool helps you create type-safe view models for your Rive animations, making it easier to interact with Rive state machines in your Flutter applications.

## Demo

https://github.com/user-attachments/assets/d68f36da-c244-4274-aa08-ed38528e6555

Check out the live demo at [tguerin.github.io/rive-viewmodel-generator](https://tguerin.github.io/rive-viewmodel-generator)

## Features

- Drag and drop interface for Rive files
- Generates type-safe Dart view model classes
- Supports all Rive property types (boolean, number, string, color, trigger, enum, nested view model)
- Generates stream getters for reactive programming
- Works on both web and desktop platforms
- Multiple file processing
- File history with download capabilities

## Usage

1. Open the application
2. Drag and drop your `.riv` file(s) onto the drop zone
3. The application will generate a Dart view model class for each Rive file
4. Download the generated files using the download button next to each file
5. Use the generated view model in your Flutter application

## Generated Code Example

Here's an example of a generated view model class:

```dart
// This file was generated by rive_viewmodel_generator
// Do not edit this file manually
// ignore_for_file: unused_import
import 'dart:ui';
import 'package:rive_native/rive_native.dart';

enum Orientation { portrait, landscape }

class TestViewModel {
  const TestViewModel._(this._viewModel);

  const factory TestViewModel.fromViewModel(ViewModelInstance viewModel) = TestViewModel._;

  final ViewModelInstance _viewModel;

  // Number property
  double get numberProperty => _viewModel.number('numberProperty')!.value;
  void set numberProperty(double value) => _viewModel.number('numberProperty')!.value = value;
  Stream<double> get numberPropertyStream => Stream<double>.multi((controller) {
    // Stream implementation
  });

  // Boolean property
  bool get booleanProperty => _viewModel.boolean('booleanProperty')!.value;
  void set booleanProperty(bool value) => _viewModel.boolean('booleanProperty')!.value = value;
  Stream<bool> get booleanPropertyStream => Stream<bool>.multi((controller) {
    // Stream implementation
  });

  // String property
  String get stringProperty => _viewModel.string('stringProperty')!.value;
  void set stringProperty(String value) => _viewModel.string('stringProperty')!.value = value;
  Stream<String> get stringPropertyStream => Stream<String>.multi((controller) {
    // Stream implementation
  });

  // Color property
  Color get colorProperty => _viewModel.color('colorProperty')!.value;
  void set colorproperty(Color value) => _viewModel.color('colorProperty')!.value = value;
  Stream<Color> get colorpropertyStream => Stream<Color>.multi((controller) {
    // Stream implementation
  });

  // Trigger property
  void triggerTriggerProperty() => _viewModel.trigger('triggerProperty')!.trigger();

  // Enum property (must end with the enum name)
  Orientation get orientation => Orientation.values.firstWhere(
    (e) => e.name == _viewModel.enumerator('orientation')!.value
  );
  void set orientation(Orientation value) => 
    _viewModel.enumerator('orientation')!.value = value.name;
  Stream<Orientation> get orientationStream => Stream<Orientation>.multi((controller) {
    // Stream implementation
  });

  // Bind to state machine
  void bind(StateMachine stateMachine) => stateMachine.bindViewModelInstance(_viewModel);

  // Cleanup
  void dispose() => _viewModel.dispose();
}
```

## Important Notes

1. **Enum Properties**: Properties that use enums must end with the enum name. For example:
   - Valid: `playerOrientation`, `gameState`, `menuOrientation`
   - Invalid: `orientationPlayer`, `stateGame`

2. **Generated Files**: Each generated file includes:
   - Type-safe getters and setters for all properties
   - Stream getters for reactive programming
   - Proper cleanup with dispose method
   - Factory constructor for easy instantiation

3. **Usage in Flutter**:
```dart
final viewModel = TestViewModel.fromViewModel(stateMachine.viewModel('Test'));
// Use getters and setters
viewModel.orientation = Orientation.portrait;
// Listen to changes
viewModel.orientationStream.listen((orientation) {
  print('Orientation changed to: $orientation');
});
```

## Requirements

- Flutter 3.29.0 or higher
- Dart SDK 3.7.0 or higher

## License

This project is licensed under the BSD-3 License - see the [LICENSE](LICENSE) file for details.
